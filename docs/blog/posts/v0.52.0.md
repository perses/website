---
date: 2025-08-04
categories:
  - release
---

# Release v0.52.0

## New profiling plugins

This release provides the support of Continuous Profiling through two plugins:

- **Pyroscope**: a datasource plugin for retrieving and handling data from a Pyroscope server.
- **Flame Chart**: a visualization plugin which contains 3 panels: Flame Graph, Table View and Series Chart.

### What is Continuous Profiling?

Continuous Profiling is a new observability signal, complementing the traditional logs, metrics, and traces. This
innovative approach provides a way of continuously measuring applications' resource consumption with code-level
granularity and low overhead. This signal generates excitement in the community for its ability to provide in-depth
visibility into production performance of applications.

### Panels

#### Flame Graph

The flame graph panel offers a simple and intuitive way to represent performance data, providing a hierarchical view
that let you zoom in on any stack for a detailed analysis. It helps to understand resource allocations (CPU,
Memory, ...) and bottlenecks within an application.

![Flame Graph Panel](../../assets/images/blog/v052/flame-graph-panel.png)

#### Table View

This panel displays the profile in a table format. It allows you to sort stacks, for example in descending order, to see
which function consume the most resources. A search bar is also present for filtering the table and highlighting stacks
in the flame graph.

![Table View Panel](../../assets/images/blog/v052/table-view-panel.png)

#### Series Chart

When retrieving profiles from the Pyroscope server, they include timeline data showing how the total amount of resources
consumed evolves over time, depending on the selected profile type. This panel allows you to visualize this data in
order to identify spikes in resource consumption (CPU, memory, etc.) and focus on them by zooming into the corresponding
time range.

![Series Chart Panel](../../assets/images/blog/v052/series-chart-panel.png)

## Heatmap

As spoiled on the previous release note, the heatmap panel has been added on Perses!
It is now possible to visualize Prometheus native histograms in a heatmap format. This panel is particularly useful for
visualizing latency distributions over time.

![Heatmap Panel](../../assets/images/blog/v052/heatmap-dark.png)
![Heatmap Panel](../../assets/images/blog/v052/heatmap-light.png)

This panel still need to be improved, so stay tuned for future updates! Or even better, contribute to it! List of
improvements to be done can be found in the [GitHub issue #2978](https://github.com/perses/perses/issues/2978)

## Support new query types

## Support SQL queries in the backend

## User profile

## Explorer improvements

Explorer can now show more information about your resources, thanks to collapsable tab menu!

![Explorer Not Collapsed](../../assets/images/blog/v052/explorer-not-collapsed.png)
![Explorer Not Collapsed](../../assets/images/blog/v052/explorer-collapsed.png)

Few other improvements have been made to the explorer, such as:

- Tabs are now sorted alphabetically
- The metric finder datasource selector is rendered correctly
- Metric finder filter inputs are now displayed in 3 parts: key, operator, value. Instead of a single input.

## CLI Improvements

### New command `percli plugin test-schema`

This new command provides a way to test the Cuelang schema and the migration schema. Here how it works:

First, all tests files needs to be placed directly alongside the schema file to test, within a `tests` folder.
Then you will have different way to test the schemas:

**Tests validating the model**:

- Validate that a JSON file is accepted by the plugin's CUE schema.
- Place valid tests under "tests/valid/". "tests" is located next to the entrypoint of the "model" CUE package.
- Each test is a JSON file containing a valid configuration expected to pass validation.

**Tests verifying invalid possibility**:

- Validate that a JSON file is rejected by the plugin's CUE schema.
- Place invalid tests in "tests/invalid/". "tests" is located next to the entrypoint of the "model" CUE package.
- Each test is a JSON file containing an invalid configuration expected to fail validation.

**Migration Tests**:

- Validate migration logic defined in the plugin's "migrate.cue" file.
- Place migration tests under "migrate/tests/". "tests" is located next to "migrate.cue".
- Each test is a directory containing:
    - "input.json": The source file (e.g., Grafana format).
    - "expected.json": The expected result after migration (Perses format).
- The migration test unifies the input with the migration schema and compares the result to the expected output.

Example of file structure for a single plugin:

```tree
schemas/
├── model.cue
├── tests/
│   ├── valid/
│   │   ├── basic-config.json
│   │   └── advanced-config.json
│   └── invalid/
│       ├── missing-required.json
│       └── invalid-type.json
└── migrate/
├── migrate.cue
└── tests/
├── basic-migration/
│   ├── input.json
│   └── expected.json
└── complex-migration/
├── input.json
└── expected.json
```

More complex example for a package embedding several plugins:

```tree
schemas/
├── my-datasource/
│   ├── model.cue
│   ├── tests/
│   │   ├── valid/
│   │   │   ├── basic-config.json
│   │   │   └── advanced-config.json
│   │   └── invalid/
│   │       ├── missing-required.json
│   │       └── invalid-type.json
│   └── migrate/
│       ├── migrate.cue
│       └── tests/
│           ├── basic-migration/
│           │   ├── input.json
│           │   └── expected.json
│           └── complex-migration/
│               ├── input.json
│               └── expected.json
└── my-query/
├── model.cue
├── tests/
│   ├── valid/
│   └── invalid/
└── migrate/
├── migrate.cue
└── tests/`,
```

### Improvement of the command `percli plugin start`

This command has been improved to provide a better experience when starting a plugin locally.

Note: all improvement described below will only work with a remote server of version >= 0.52.0 as it also included new
endpoints to make the features work.

1. With this new version, the command is now able to detect any changes on the Cuelang schema.
   When a change is detected, the command will trigger the remote server to reload the schema internally.
   This improvement is particularly useful during the development of a plugin, as it allows to see the changes of the
   schema immediately without having to manually restart the server and the plugin watching process.

2. When stopping the command, it will now unregister any plugin it was watching. This is useful to avoid having to
   restart the remote server to get back the list of registered plugins clean. It also solve an issue about being able
   to override a plugin with the development version of the same plugin.
