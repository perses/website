---
date: 2025-06-06
categories:
  - release
---

# Release v0.51.0

We are excited to announce the release of Perses v0.51.0!

This release brings several new features, improvements, and bug fixes to enhance your experience with Perses.

It is a significant step forward in the evolution of Perses, and we are thrilled to share it with you. We have
been working hard to bring you a more powerful and flexible platform for your observability needs.

This release includes a new plugin architecture that allows you to develop external plugins and load them in Perses, as
well as several new plugins, including a datasource variable and a histogram chart.

Also, as part of this change, we are introducing a new repository [perses/plugins](https://github.com/perses/plugins)
containing all default plugins supported by Perses.

We have also made significant improvements to the documentation, highlighting features that were implemented some time
ago but not well advertised, such as datasource discovery and ephemeral dashboards.

## New Plugins system

## New Plugins

### Datasource variable

### Histogram Chart

## Custom Lint rules

As you may know, to validate your dashboard, we have implemented a set of rules.
These rules are executed when you save your dashboard during the unmarshalling step from JSON or YAML or during the
validation of each plugin using Cuelang.

In this release, we have added the ability to create custom lint rules. This allows you to enforce specific standards or
practices within your organization.

These custom rules should be defined in the configuration file of your Perses instance, typically located at
`/etc/perses/config.yaml`. The rules are defined under the `dashboard.custom_lint_rules` section.

Here is an example of how to define custom lint rules for dashboards:

```yaml
dashboard:
  custom_lint_rules:
    - name: "Dashboard Naming Convention"
      target: "$.metadata.name"
      assertion: "value.matches('^[a-z]+(-[a-z]+)*$')"
      message: "Dashboard name must be all lowercase letters with hyphens only."
      disable: false

    - name: "At Least One Panel Exists"
      target: "$.spec.panels"
      assertion: "value.size() > 0"
      message: "Dashboard must contain at least one panel."
      disable: false
```

We are using the [JSONPath](https://goessner.net/articles/JsonPath/) syntax to target specific parts of the dashboard
JSON structure, and the assertion is a [CEL](https://github.com/google/cel-spec/blob/master/doc/langdef.md) expression.

To know more about the syntax of the rules, please refer to
the [documentation](https://perses.dev/perses/docs/configuration/custom-lint-rules)

## Disable datasource and variable

In Perses, it is possible to create datasource and variables at three different levels: global, project, and dashboard.

Usually for security and governance reasons, you may want to prevent people to create datasource and variables at
various levels. For global and project levels, this is already possible using the RBAC system.

But before this release, it was not possible to disable the creation of datasource and variables at the dashboard level.

In this release, we are introducing the ability to disable the manipulation of datasources and variables at any level.
For that, you need to modify the configuration file of your Perses instance, and add the following section:

```yaml
datasource:
  global:
    disable: true
  project:
    disable: true
  disable_local: true
```

This configuration is preventing the usage of datasources at any level and disable the associated HTTP route in the
Perses proxy.

Of course, this config is silly because without datasources, you cannot use dashboards, but it is a good example of how
to disable datasources.

The same example applies for variables:

```yaml
variable:
  global:
    disable: true
  project:
    disable: true
  disable_local: true
```

## Improvement of the datasource discovery

One year ago, we introduced the datasource discovery feature, which allows you to automatically discover remote
datasources from the Kubernetes API or from a generic HTTP endpoint.
And so far we never got feedback about it until a couple of months ago when [SAP](https://www.sap.com/) started using
it.

### Overview

We didn't have the opportunity to highlight this feature, so here is a quick overview of how it works.

Datasource discovery is useful when you have a large number of datasources, and you don't want to manually register
them in your application. Note that this feature can only be used when registering Global Datasources.

We are supporting two types of discovery:

- **Kubernetes API**: This allows you to discover datasources that are registered in the Kubernetes API, such as
  Prometheus, Loki, and others. You can configure the discovery by specifying the namespace where the datasources are
  located, the label selector to filter the datasources and the type of the discovery you would like to use: service,
  pod, endpoint.
- **HTTP Endpoint**: This allows you to discover datasources from a generic HTTP endpoint. You can configure the
  discovery by specifying the URL of the endpoint. The endpoint should return a JSON array of Global Datasource.

If you want to learn more about this feature, please refer to
the [documentation](https://perses.dev/perses/docs/configuration/datasource-discovery/).

### Improvements

- We made a mistake about how the label selector was converted from the configuration file to the Kubernetes
   API. The label selector was not correctly formatted, which prevented the discovery from working properly.
- When converting a service to a global datasource, there was a corner case where the global datasource was not
   correctly created. And then Perses was not able to load the datasource.

Thanks to these little improvements, the datasource discovery feature is now more reliable and easier to use.

## Community Dashboards

## Documentations
